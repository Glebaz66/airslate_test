window.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".js-form");new FormHandler(t)});class FormHandler{constructor(t){null!==t&&(this.body=document.body,this.form=t,this.input={email:{elem:this.form.querySelector('input[type="email"]'),value:"",valid:!1},password:{elem:this.form.querySelector('input[type="password"]'),value:"",valid:!1}},this.submit=this.form.querySelector(".js-submit"),this.input.email.elem.addEventListener("keypress",t=>{"Enter"===t.key&&this.validateInput(this.input.email.elem)}),this.input.password.elem.addEventListener("keypress",t=>{"Enter"===t.key&&this.validateInput(this.input.password.elem)}),this.input.email.elem.addEventListener("keydown",t=>{9===t.which&&this.validateInput(this.input.email.elem)}),this.input.password.elem.addEventListener("keydown",t=>{9===t.which&&this.validateInput(this.input.password.elem)}),this.input.email.elem.addEventListener("focus",()=>{this.removeError(this.input.email.elem)}),this.input.password.elem.addEventListener("focus",()=>{this.removeError(this.input.password.elem)}),this.body.addEventListener("click",t=>{t.target.classList.contains("js-submit")||(this.removeError(this.input.email.elem),this.removeError(this.input.password.elem))}),this.submit.addEventListener("click",t=>{t.preventDefault(),this.sendForm(this.input)}))}validateInput(t){const e=t.dataset.type,i=t.value;let s=!1;switch(e){case"email":const e=/[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,}$/;return null===i.match(e)||""===i?(console.log(t),this.input.email.valid=!1,this.toggleError(this.input.email.valid,t)):(this.input.email.valid=!0,this.toggleError(this.input.email.valid,t),s=!0),s;case"password":return this.input.password.valid=""!==i,""===i?(this.input.password.valid=!1,this.toggleError(this.input.password.valid,t)):(this.input.password.valid=!0,this.toggleError(this.input.password.valid,t),s=!0),s;default:return this.input.password.valid=!1,this.toggleError(this.input.password.valid,t),s}}toggleError(t,e){t?(e.classList.remove("error"),e.nextElementSibling.classList.remove("active")):(e.classList.add("error"),e.nextElementSibling.classList.add("active"))}removeError(t){t.classList.remove("error"),t.nextElementSibling.classList.remove("active")}async sendForm(){!0===this.validateInput(this.input.email.elem)&&!0===this.validateInput(this.input.password.elem)&&(alert("data sended"),this.form.submit())}}